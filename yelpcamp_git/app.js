var express=require("express");
var app=express();
var bodyparser=require("body-parser"),
	campground=require("./models/campground"),
	comment   =require("./models/comment"),
	seeddb    =require("./seeds"),
	flash     =require("connect-flash");
	mongoose = require('mongoose'),
	methodoverride=require("method-override"),
	passport  =require("passport"),
	localstrategy=require("passport-local"),
	user        =require("./models/user");
		
var campgroundRoutes=require("./routes/campground"),
	commentRoutes	=require("./routes/comment"),
	indexRoutes		=require("./routes/index");


/*   local server
mongoose.connect('mongodb://localhost:27017/yelp_camp', {
  useNewUrlParser: true,
  useUnifiedTopology: true
})
.then(() => console.log('Connected to DB!'))
.catch(error => console.log(error.message));
*/
//seeddb();   ///seed the database
// online
mongoose.connect("mongodb+srv://RaushanKumar:fillpassword@cluster0.70ips.mongodb.net/yelp_camp?retryWrites=true&w=majority",{
	useNewUrlParser :true,
	useCreateIndex:true,
	useUnifiedTopology:true
}).then(()=>{
	console.log("Connected to DB!");
}).catch(err=>{
	console.log("Error : ",err.message);
});

///passport configuration

app.use(require("express-session")({
	secret:"ONCES AGAIN RUSTY WINS CUTEST DOG",
	resave:false,
	saveUninitialized:false
}));
app.use(methodoverride("_method"));
app.use(passport.initialize());
app.use(passport.session());
app.use(flash());
passport.use(new localstrategy(user.authenticate()));
passport.serializeUser(user.serializeUser());
passport.deserializeUser(user.deserializeUser());





//schema setup

/*campground.create({
	name:"FOUNTAIN GRREK",image:"data:image/jpeg;base64,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",
	discription:"THIS IS A HUGE GRANITE HILL<NO BATHROOMS<NO WATER<BEAUTIFUL GRANITE"},function(err,allcampground){
	if(err){
		console.log(err);
	}else
		{
			console.log(allcampground);
		}
});

*/

app.use(bodyparser.urlencoded({extended:true}));
//app.use(express.static("public"));// for style adding to all templets
app.set("view engine","ejs");// for not using alwys  .ejs in every file...
app.use(express.static(__dirname + "/public"));


app.use(function(req,res,next){
	res.locals.currentUser=req.user;
	res.locals.error=req.flash("error");
	res.locals.success=req.flash("success");
	next();
});

app.use("/",indexRoutes);
app.use("/campground",campgroundRoutes);
app.use("/campground/:id/comments",commentRoutes);

app.get("*",function(req,res){
	res.render("landingpage");
})
app.listen(process.env.PORT,process.env.IP,function(){
	console.log("YELP CAMP SERVER STARTED");
})